<form class="postal-form" [formGroup]='codesForm'>
  <mat-form-field>
    <input placeholder="Choisissez une ville quartier ou avenue..." matInput [matAutocomplete]="auto"
           formControlName='userInput'>
  </mat-form-field>
  <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
    <mat-option *ngIf="isLoading" class="is-loading">
      <mat-spinner diameter="50"></mat-spinner>
    </mat-option>
    <ng-container *ngIf="!isLoading">
      <mat-option (onSelectionChange)="selectPostalCode(postalcode)" *ngFor="let postalcode of filteredCodes"
                  [value]="postalcode">
        <span>{{ postalcode.city }}</span>
        <small> | {{postalcode.place}}</small>
      </mat-option>
    </ng-container>
  </mat-autocomplete>

  <div class="postalcode" *ngIf="selectedCode">  {{ selectedCode.code }} </div>
</form>

